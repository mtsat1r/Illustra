<mahcontrols:MetroWindow x:Class="Illustra.Views.AdvancedSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mahcontrols="http://metro.mahapps.com/winfx/xaml/controls"
        Title="{DynamicResource String_Menu_Settings_Advanced}"
        Icon="{StaticResource AppIcon}"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        WindowTransitionsEnabled="False"
        ResizeMode="NoResize">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 設定項目 -->
        <StackPanel Grid.Row="0">
            <!-- スタートアップ設定セクション -->
            <GroupBox Header="{DynamicResource String_Settings_Startup_Section}"
                      Margin="0,10,0,0">
                <StackPanel Margin="5">
                    <RadioButton Content="{DynamicResource String_Settings_Startup_None}"
                                 IsChecked="{Binding StartupModeNone}"
                                 Margin="0,0,0,5"/>
                    <RadioButton Content="{DynamicResource String_Settings_Startup_LastOpened}"
                                 IsChecked="{Binding StartupModeLastOpened}"
                                 Margin="0,0,0,5"/>
                    <RadioButton Content="{DynamicResource String_Settings_Startup_Specified}"
                                 IsChecked="{Binding StartupModeSpecified}"
                                 Margin="0,0,0,5"/>

                    <Grid Margin="20,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBox Grid.Column="0"
                                 Text="{Binding StartupFolderPath, UpdateSourceTrigger=PropertyChanged}"
                                 IsEnabled="{Binding StartupModeSpecified}"/>

                        <Button Grid.Column="1"
                                Content="{DynamicResource String_Settings_Startup_Browse}"
                                Margin="5,0,0,0"
                                Padding="10,0"
                                Click="BrowseStartupFolder_Click"
                                IsEnabled="{Binding StartupModeSpecified}"/>
                   </Grid>

                   <CheckBox Content="{DynamicResource String_Settings_Startup_SelectLastFile}"
                            IsChecked="{Binding SelectLastFileOnStartup}"
                            Margin="0,10,0,0"/>
               </StackPanel>
           </GroupBox>

            <!-- スクロール設定セクション -->
            <GroupBox Header="{DynamicResource String_Settings_ScrollConfig_Section}"
                      Margin="0,10,0,0">
                <Grid Margin="5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0"
                           Content="{DynamicResource String_Settings_MouseWheelMultiplier}"
                           VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1"
                             Text="{Binding MouseWheelMultiplier, UpdateSourceTrigger=PropertyChanged, StringFormat=F1}"
                             VerticalAlignment="Center"
                             Margin="5,0"/>
                    <Label Grid.Column="2"
                           Content="×"
                           VerticalAlignment="Center"/>
                </Grid>
            </GroupBox>

            <!-- スライドショー設定セクション -->
            <GroupBox Header="{DynamicResource String_Settings_Slideshow_Section}"
                      Margin="0,10,0,0">
                <Grid Margin="5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Label Grid.Column="0"
                           Content="{DynamicResource String_Settings_Slideshow_Interval}"
                           VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1"
                             x:Name="SlideshowIntervalTextBox"
                             Text="{Binding SlideshowInterval, UpdateSourceTrigger=PropertyChanged}"
                             VerticalAlignment="Center"
                             Margin="5,0"/>
                    <Label Grid.Column="2"
                           Content="{DynamicResource String_Settings_Slideshow_Seconds}"
                           VerticalAlignment="Center"/>
                </Grid>
            </GroupBox>

            <!-- 開発者設定セクション -->
            <GroupBox Header="{DynamicResource String_Settings_Developer_Section}"
                      Margin="0,10,0,0">
                <StackPanel Margin="5">
                    <CheckBox Content="{DynamicResource String_Settings_Developer_EnableDevMode}"
                              IsChecked="{Binding DeveloperMode}"
                              VerticalAlignment="Center"
                              x:Name="DeveloperModeCheckBox"
                              Checked="DeveloperModeCheckBox_CheckedChanged"
                              Unchecked="DeveloperModeCheckBox_CheckedChanged"/>

                    <!-- データベース整理ボタン -->
                    <Button Content="{DynamicResource String_Settings_Developer_CleanDatabase}"
                            Margin="0,5,0,5"
                            Padding="10,3"
                            HorizontalAlignment="Left"
                            Click="CleanupDatabase_Click"/>

                    <!-- 開発者モードが有効な場合のみ表示されるログカテゴリ設定 -->
                    <Expander Header="{DynamicResource String_Settings_Developer_LogCategories}"
                             Margin="10,5,0,0"
                             x:Name="LogCategoriesExpander"
                             Visibility="Collapsed">
                        <ScrollViewer MaxHeight="200"
                                      VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="LogCategoriesPanel"
                                        Margin="5">
                                <!-- チェックボックスはコードビハインドで動的に追加されます -->
                            </StackPanel>
                        </ScrollViewer>
                    </Expander>
                </StackPanel>
            </GroupBox>
        </StackPanel>

        <!-- ボタン -->
        <Grid Grid.Row="1"
              Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Button Grid.Column="1"
                    Content="{DynamicResource String_Common_Ok}"
                    Width="75"
                    Height="23"
                    Click="OKButton_Click"/>
        </Grid>
    </Grid>
</mahcontrols:MetroWindow>
